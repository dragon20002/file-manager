<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="~{layout/index}">

<th:block layout:fragment="css">
<style>
.upload-box-input {
	border: 2px dashed dodgerblue;
	border-radius: 5px;
	width: 100%;
	height: 300px;
	padding: 150px 5px 0px 5px;
	text-align: center;
}
.upload-box-label {
	width: 100%;
	text-align: center;
}
</style>
</th:block>

<th:block layout:fragment="script"></th:block>

<div layout:fragment="content" class="container-fluid">
	<div style="height: 10px"></div>

	<form th:action="@{/files}" method="post"
		enctype="multipart/form-data">

		<div class="form-group upload-box">
			<input type="file" class="upload-box-input" id="file" name="files"
				data-multiple-caption="{count} 개 파일" multiple>

			<label class="upload-box-label" for="file">파일을 드래그해서 놓아주세요!</label>
		</div>

		<div class="form-group text-center">
			<button type="submit" class="btn btn-primary">올리기</button>
		</div>

	</form>

	<hr>

	<h4>파일</h4>

	<table class="table-striped" th:if="${fileInfoList.size()} > 0 OR
			( ${safeFileInfoList != null} AND ${safeFileInfoList.size()} > 0 )">
		<thead>
			<tr style="text-align: center"><th>파일명</th><th>크기</th><th></th></tr>
		</thead>
		<tbody>
			<tr style="text-align: center" th:each="fileInfo : ${fileInfoList}">
				<td style="padding: 5px 50px 5px 50px" th:text="${fileInfo.getName()}"></td>
				<td style="padding: 5px 50px 5px 50px" th:text="|${fileInfo.getSize()} KB|"></td>
				<td style="padding: 5px 50px 5px 50px">
					<a th:href="@{${dirName} + ${fileInfo.getEncName()}}" download>다운로드</a>
				</td>
			</tr>

			<tr style="text-align: center" th:each="fileInfo : ${safeFileInfoList}">
				<td style="padding: 5px 50px 5px 50px" th:text="${fileInfo.getName()}"></td>
				<td style="padding: 5px 50px 5px 50px" th:text="|${fileInfo.getSize()} KB|"></td>
				<td style="padding: 5px 50px 5px 50px">
					<a th:href="@{${safeDirName} + ${fileInfo.getEncName()}}" download>다운로드</a>
				</td>
			</tr>
		</tbody>
	</table>

	<hr>

	<h4>영화</h4>

	<table class="table-striped" th:if="${videoInfoList.size()} > 0 OR
			( ${safeVideoInfoList != null} AND ${safeVideoInfoList.size()} > 0 )">
		<thead>
			<tr style="text-align: center"><th>파일명</th><th>크기</th><th></th></tr>
		</thead>
		<tbody>
			<tr style="text-align: center" th:each="videoInfo : ${videoInfoList}">
				<td style="padding: 5px 50px 5px 50px" th:text="${videoInfo.getName()}"></td>
				<td style="padding: 5px 50px 5px 50px" th:text="|${videoInfo.getSize()} KB|"></td>
				<td style="padding: 5px 50px 5px 50px">
					<a th:href="@{videos/n/(name=${videoInfo.getName()})}">재생</a>
				</td>
			</tr>
			<tr style="text-align: center" th:each="safeVideoInfo : ${safeVideoInfoList}">
				<td style="padding: 5px 50px 5px 50px" th:text="${safeVideoInfo.getName()}"></td>
				<td style="padding: 5px 50px 5px 50px" th:text="|${safeVideoInfo.getSize()} KB|"></td>
				<td style="padding: 5px 50px 5px 50px">
					<a th:href="@{videos/s/(name=${safeVideoInfo.getName()})}">재생</a>
				</td>
			</tr>
		</tbody>
	</table>

</div>

</html>